---
title: "Форматирование приставки или SD-карты" #
lang: ru
permalink:  clean_sd.html
author_profile: true
---
{% include toc title="Разделы" %}

## Описание шагов
Если вам необходимо очистить приставку, скажем, перед продажей, либо вы потеряли все данные на вашей SD-карте и хотите их восстановить, нижеследующие инструкции для вас. 

### Часть I - Определение версии загрузчика 
Сначала нужно определить каким методом приставка взломана. 

#### I. Если приставка загружается

Если прошивка выполнялась по этому гайду , то в CTRNAND приставки должны были быть скопированы файлы прошивки. Следовательно, вынув КП из приставки и запустив 3DS, вы сможете запустить Luma3DS и увидеть её версию, из чего легко сделать вывод о том, какой загрузчик стоит в системе.
{: .notice--info}

1. Отключите 3DS
1. Достаньте КП из приставки
1. Загрузите приставку с зажатой кнопкой (SELECT)
1. Обратите внимание на первую строчку, там написана версия Luma3DS
  + Если Luma3DS меньше, или равна 7.0.5, то у вас a9lh - [перейдите на b9s актуальной версии](a9lh-to-b9s), затем вернитесь к текущей инструкции
  + Если Luma3DS 7.1, то у вас b9s 1.0 и нужно [обновить его до актуальной версии](updating-b9s), затем вернитесь к текущей инструкции
  + Если версия Luma3DS выше, или равна 8.0, у вас b9s 1.2 или выше. Можете [обновить его до актуальной версии](updating-b9s), если вы не знаете какая именно у вас стоит сейчас

    ![]({{ base_path }}/images/screenshots/luma.png)
	{: .text-center}
    {: .notice--info}

#### II. Если приставка не загружается

Этот метод для тех, кто по каким-то причинам не стал устанавливать Luma3DS в CTRNAND, либо для тех, кто обновился до b9s 1.0 в момент его выхода и обновил Luma3DS через Luma3DS Updater
{: .notice--info}

1. Выключаем консоль
1. Вставляем SD-карту из приставки в компьютер
1. Качаем [Luma3DS 7.0.5](https://github.com/AuroraWright/Luma3DS/releases/tag/v7.0.5)
1. Копируем `arm9loaderhax.bin` из архива `Luma3DSv7.0.5.7z` в корень карты памяти с заменой
1. Возвращаем карту памяти в консоль
1. Пробуем запустить приставку. 
1. Если сработало и приставка запустилась, то у вас a9lh - [перейдите на b9s актуальной версии](a9lh-to-b9s), затем вернитесь к текущей инструкции
  + Если не сработало, двигаемся дальше
1. Качаем [Luma3DS 7.1](https://github.com/AuroraWright/Luma3DS/releases/tag/v7.1) 
1. Копируем `boot.firm` из архива `Luma3DSv7.1.7z` в корень карты памяти с заменой 
1. Возвращаем карту памяти в консоль 
1. Пробуем запустить приставку. 
1. Если сработало и приставка запустилась, то у вас b9s 1.0 и нужно обновить его до версии актуальной версии по инструкции (updating-b9s), затем вернитесь к текущей инструкции
  + Если не сработало, двигаемся дальше
1. Качаем [свежую версию Luma3DS](https://github.com/AuroraWright/Luma3DS/releases/latest)
1. Копируем `boot.firm` из `7z-архива` Luma3DS в корень SD-карты с заменой 
1. Возвращаем SD-карту в консоль 
1. Пробуем запустить приставку. 
1. Если сработало и приставка запустилась, то у вас b9s 1.2 или выше и самая последняя версия Luma3DS. Можете [обновить b9s до актуальной версии](updating-b9s), если вы не знаете какая именно у вас стоит сейчас

### Часть II - Очистка приставки 

#### I. Форматирование приставки

Если вы хотите подготовить консоль к продаже, либо просто по какой-то причине начать с чистого листа, отформатируйте приставку через меню настроек. При этом взлом сохранится, а все данные на приставке будут уничтожены.
{: .notice--info}

1. Включите приставку
1. Перейдите в Системные настройки (System Settings)
1. Перейдите в меню "Прочие настройки" (Other Settings)
1. Перейдите на последнюю вкладку и нажмите кнопку "Форматировать" (Format System Memory)
1. Внимательно ознакомьтесь с написанным и нажмите "Далее" (Next), затем "Форматир." (Format)
1. Нажмите большую красную кнопку "Форматировать" (Format)

	Помните, это уничтожит все данные на консоли!
	{: .notice--danger}

1. По окончании процесса приставка перезагрузится и предложит пройти инициализацию как в первый раз.
1. Закончите настроку

#### II. Форматирование SD-карты

Рекомендую произвести форматирование карты памяти, чтобы очистить ее от ненужного мусора и уничтожить возможные накопившиеся ошибки. Помните, что форматирование уничтожит все ваши данные! 
{: .notice--info}

1. Вставьте SD-карту в компьютер
1. Отформатируйте её с помощью [SD Memory Card Formatter
](https://www.sdcard.org/downloads/formatter_4/eula_windows/SD_CardFormatter0500SetupEN.exe) с параметрами по-умолчанию
1. Отформатируйте её с помощью [`GUIFormat FAT32`](http://www.ridgecrop.demon.co.uk/guiformat.exe) с параметрами по-умолчанию

### Часть III - Установка программного обеспечения 

К этому моменту вы должны находится на b9s 1.2 или выше
{: .notice--info}

#### Что понадобится

* Свежая версия [Luma3DS](https://github.com/AuroraWright/Luma3DS/releases/latest) *(`.7z`-архив)*
* Свежая версия [OCS](https://github.com/Pirater12/ocs/releases/latest)

#### I. Установка и настройка Luma3DS

1. Выключите приставку
1. Вставьте SD-карту из приставки в ПК
1. Скопируйте файл `boot.firm` из `.7z-архива` Luma3DS в корень SD-карты
1. Верните SD-карту в приставку и включите её
{% include /inc/luma_setup.txt %}
  + Если появляется ошибка, просто переходите к следующей странице

#### II. Запуск OSC

1. Запустите приложение Загружаемая игра (Download Play)
1. Нажмите (L) + (ВНИЗ) + (SELECT) одновременно чтобы открыть меню Rosalina
1. Выберите "Miscellaneous options"
1. Выберите "Switch the hb. title to the current app."
1. Нажмите (B), чтобы продолжить
1. Нажмите (B) для возврата в главное меню Rosalina
1. Нажмите (B) для выхода из главного меню Rosalina
1. Нажмите (HOME), затем закройте приложение Загружаемая игра (Download Play)
1. Запустите приложение Загружаемая игра (Download Play)
1. Консоль должна загрузиться в OSC

#### III. OSC

1. Нажмите (A), для начала работы программы
1. Дождитесь окончания загрузки и установки
1. Нажмите (START) по запросу для выхода из программы 

#### IV. DSP Dump

1. Запустите приложение DSP1
1. После завершения работы программы, нажмите (B), чтобы автоматически удалить программу из меню Home

#### V. CTRNAND Luma3DS

{% include /inc/ctrnand_luma.txt %}

#### VI. Очистка SD-карты

1. Нажмите кнопку (HOME) для вызова меню
1. Выберите "Scripts..."
1. Выберите "cleanup_sd_card"
1. При появлении запроса, нажмите (A) для продолжения
1. Нажмите (A), чтобы продолжить
1. Нажмите (START) для перезагрузки

После работы скрипта корень SD-карты будет выглядеть следующим образом: 

![]({{ base_path }}/images/screenshots/final-file-layout.png)
{: .text-center}

#### VII. Дополнительные материалы

Теперь ваша приставка прошита и вы можете пользоваться всеми благами кастомной прошивки

1. Можете [установить freeshop](freeshop) для скачивания игр бесплатно прямно на консоли
1. Можете украсить приставку [жетонами](badges) и [темами](themes)
1. Ознакомится с остальным [списком полезных инструкций](addons)